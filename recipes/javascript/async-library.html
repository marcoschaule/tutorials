<!DOCTYPE html><html><head><meta charset="utf8"><title>The Async Library</title><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/tutorials/css/styles.css"><base href="/tutorials/"></head><body><div class="container" id="container"><header id="header"><div id="title"><a href="/tutorials/">Tutorials</a></div><div id="subtitle">Learning by Recipes.</div></header><nav id="navigation"><a href="/tutorials/">Home</a><a class="active" href="/tutorials/blog.html">Blog</a><a href="/tutorials/about.html">About</a><a href="/tutorials/contact.html">Contact</a></nav><main id="content"><div class="page-The Async Library"><h1>The Async Library</h1><p><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>The <a href="https://caolan.github.io/async/docs.html" target="_blank" rel="external"><code>Async</code></a>
library provides function to handle
asynchronous JavaScript for developers</p>
<ul>
<li>to avoid <a href="recipes/javascript/callbacks.html#Callback-Hell-or-Pyramid-of-Doom">Callback Hells</a>, and</li>
<li>to handle asynchronous control flows
like loops, series etc.</li>
</ul>
<p>Although originally designed for use with Node.js,
it can also be used directly in the browser.</p>
<h2 id="Collection-function"><a href="#Collection-function" class="headerlink" title="Collection function"></a>Collection function</h2><p>The most commonly used collection functions are</p>
<ul>
<li>the <a href="recipes/javascript/async-library.html#The-async-each-function"><code>async.each</code></a>
function, and</li>
<li>The <a href="recipes/javascript/async-library.html#The-async-eachSeries-function"><code>async.eachSeries</code></a>
function.</li>
</ul>
<h3 id="The-async-each-function"><a href="#The-async-each-function" class="headerlink" title="The async.each function"></a>The <code>async.each</code> function</h3><p>Features:</p>
<ul>
<li>The <code>async.each</code> loop calls all loop functions in parallel and
fires the final callback when all functions are done.</li>
<li>The final callback is optional.</li>
<li>All functions are fired “at the same time”,
not waiting for one-another.</li>
<li>If a callback is called with an error, the process aborts
and calls the final callback if available.</li>
</ul>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction1</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called at the same time</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction2</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called at the same time</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction3</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called at the same time</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">async</span>.each([myFunction1, myFunction2, myFunction3],</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">myFinalCallback</span>(<span class="params">objErr</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (objErr) &#123;</div><div class="line">      <span class="comment">// handle error if occurred</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// ... continue</span></div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<p>As long as no function calls its callback with <code>myInnerCallback(anyErr)</code>,
the process continues. As soon as any error occurs, the whole process
aborts and the final callback is called with that very error.</p>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction1</span>(<span class="params">myInnerCallback</span>) </span>&#123;</div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(anyErr);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction2</span>(<span class="params">myInnerCallback</span>) </span>&#123;</div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Some error occurred in function 2!'</span>)); <span class="comment">// it aborts here</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction3</span>(<span class="params">myInnerCallback</span>) </span>&#123;</div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">async</span>.each([myFunction1, myFunction2, myFunction3],</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">myFinalCallback</span>(<span class="params">objErr</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (objErr) &#123;</div><div class="line">      <span class="comment">// this logs an error with 'Some error occurred in function 2!'</span></div><div class="line">      <span class="built_in">console</span>.log(objErr);</div><div class="line">    &#125;</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<h3 id="The-async-eachSeries-function"><a href="#The-async-eachSeries-function" class="headerlink" title="The async.eachSeries function"></a>The <code>async.eachSeries</code> function</h3><p>Features:</p>
<ul>
<li>The <code>async.eachSeries</code> loop calls all loop functions in series
and fires the final callback when all functions are done.</li>
<li>The final callback is optional.</li>
<li>Each function is called when the previous has finished, they
are called in the order provided by the array.</li>
<li>If a callback is called with an error, the process aborts
and calls the final callback if available.</li>
</ul>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction1</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called 1st</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction2</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called 2nd</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction3</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called 3rd</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">async</span>.eachSeries([myFunction1, myFunction2, myFunction3],</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">myFinalCallback</span>(<span class="params">objErr</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (objErr) &#123;</div><div class="line">      <span class="comment">// handle error if occurred</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// ... continue</span></div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<p>Apart from the non-parallel behavior, the <code>async.eachSeries</code> behaves exactly as the
<code>async.each</code>.</p>
<h2 id="Control-flow-function"><a href="#Control-flow-function" class="headerlink" title="Control flow function"></a>Control flow function</h2><h3 id="The-async-parallel-function"><a href="#The-async-parallel-function" class="headerlink" title="The async.parallel function"></a>The <code>async.parallel</code> function</h3><p>The <code>async.parallel</code> works similar to the <code>async.each</code> function:</p>
<ul>
<li>It calls all loop functions in parallel and
fires the final callback when all functions are done.</li>
<li>All functions are fired “at the same time”,
not waiting for one-another.</li>
<li>The final callback is optional.</li>
<li>If a callback is called with an error, the process aborts
and calls the final callback if available.</li>
<li>The difference to <code>async.each</code> is, that each callback can
be called with additional result parameters for the
final callback.</li>
</ul>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction1</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called at the same time</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>, <span class="string">'someString'</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction2</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called at the same time</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>, <span class="string">'someOtherString'</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction3</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called at the same time</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>, <span class="number">3</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">async</span>.parallel([myFunction1, myFunction2, myFunction3],</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">myFinalCallback</span>(<span class="params">objErr, arrResults</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (objErr) &#123;</div><div class="line">      <span class="comment">// handle error if occurred</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(arrResults); <span class="comment">// logs ['someString', 'someOtherString', 3]</span></div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<h3 id="The-async-series-function"><a href="#The-async-series-function" class="headerlink" title="The async.series function"></a>The <code>async.series</code> function</h3><p>The <code>async.series</code> works similar to the <code>async.eachSeries</code> function.</p>
<ul>
<li>It calls all loop functions in series and
fires the final callback when all functions are done.</li>
<li>All functions are fired one after another.</li>
<li>The final callback is optional.</li>
<li>If a callback is called with an error, the process aborts
and calls the final callback if available.</li>
<li>The difference to <code>async.eachSeries</code> is, that each callback can
be called with additional result parameters for the
final callback.</li>
</ul>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction1</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called 1st</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>, <span class="string">'someString'</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction2</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called 2nd</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>, <span class="string">'someOtherString'</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction3</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called 3rd</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>, <span class="number">3</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">async</span>.series([myFunction1, myFunction2, myFunction3],</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">myFinalCallback</span>(<span class="params">objErr, arrResults</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (objErr) &#123;</div><div class="line">      <span class="comment">// handle error if occurred</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(arrResults); <span class="comment">// logs ['someString', 'someOtherString', 3]</span></div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<h3 id="The-async-waterfall-function"><a href="#The-async-waterfall-function" class="headerlink" title="The async.waterfall function"></a>The <code>async.waterfall</code> function</h3><p>The <code>async.waterfall</code> works similar to the <code>async.series</code> function:</p>
<ul>
<li>It calls all loop functions in series and
fires the final callback when all functions are done.</li>
<li>All functions are fired one after another.</li>
<li>The final callback is optional.</li>
<li>If a callback is called with an error, the process aborts
and calls the final callback if available.</li>
<li>The difference to <code>async.series</code> is, that each callback can
be called with additional result parameters for the <em>next</em> function.</li>
</ul>
<p>Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// called 1st</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction1</span>(<span class="params">myInnerCallback</span>) </span>&#123; <span class="comment">// called 1st</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>, <span class="string">'someValue'</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">// called 2nd</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction2</span>(<span class="params">strArgPrevious, myInnerCallback</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(strArgPrevious); <span class="comment">// logs 'someValue'</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>, <span class="string">'someValue1'</span>, <span class="string">'someValue2'</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">// called 3rd</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunction3</span>(<span class="params">strArgPrevious1, strArgPrevious2, myInnerCallback</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(strArgPrevious1); <span class="comment">// logs 'someValue1'</span></div><div class="line">  <span class="built_in">console</span>.log(strArgPrevious2); <span class="comment">// logs 'someValue2'</span></div><div class="line">  <span class="comment">// do something ...</span></div><div class="line">  myInnerCallback(<span class="literal">null</span>, <span class="string">'someFinalValue'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">async</span>.waterfall([myFunction1, myFunction2, myFunction3],</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">myFinalCallback</span>(<span class="params">objErr, strArgFinal</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (objErr) &#123;</div><div class="line">      <span class="comment">// handle error if occurred</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(strArgFinal); <span class="comment">// logs 'someFinalValue'</span></div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<h2 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h2><ul>
<li><a href="https://caolan.github.io/async/" target="_blank" rel="external">Async documentation</a></li>
<li><a href="https://github.com/caolan/async" target="_blank" rel="external">Async on GitHub</a></li>
</ul>
</p></div></main><footer id="footer"><hr>&copy; by Marco Schaule
&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;<a href="/tutorials/imprint.html" title="Imprint">Imprint</a></footer></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script><script src="/tutorials/scripts/scripts.js"></script></body></html>